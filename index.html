<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mein Lernportfolio</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            display: flex;
            gap: 20px;
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            min-height: calc(100vh - 40px);
        }

        .sidebar {
            padding: 30px 20px;
            background: #f8f9fa;
        }

        .sidebar-left {
            width: 20%;
            border-right: 2px solid #e9ecef;
        }

        .sidebar-right {
            width: 20%;
            border-left: 2px solid #e9ecef;
        }

        .main-content {
            width: 60%;
            padding: 40px;
            /* overflow-y: auto; */
        }

        h1 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 2em;
        }

        h2 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.3em;
            border-bottom: 2px solid #667eea;
            padding-bottom: 8px;
        }

        h3 {
            color: #6c757d;
            margin: 20px 0 10px;
            font-size: 1.1em;
        }

        .profile {
            margin-bottom: 30px;
        }

        .profile-info {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .profile-info p {
            margin: 8px 0;
            color: #495057;
            font-size: 0.9em;
        }

        .article-list {
            list-style: none;
        }

        .article-list li {
            margin: 10px 0;
        }

        .article-list a {
            display: block;
            padding: 10px;
            background: white;
            border-radius: 6px;
            text-decoration: none;
            color: #495057;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .article-list a:hover {
            background: #667eea;
            color: white;
            border-left-color: #764ba2;
            transform: translateX(5px);
        }

        .article-list a.active {
            background: #667eea;
            color: white;
            border-left-color: #764ba2;
        }

        .article-content {
            line-height: 1.8;
            color: #343a40;
        }

        .article-content p {
            margin: 15px 0;
        }

        #knowledge-graph {
            width: 100%;
            height: 600px;
            background: #ffffff;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            position: relative;
        }

        .graph-info {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.85em;
            color: #6c757d;
        }

        .node circle {
            fill: #667eea;
            stroke: #764ba2;
            stroke-width: 2.5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .node circle:hover {
            fill: #764ba2;
            r: 28;
        }

        .node.active circle {
            fill: #ff6b6b;
            stroke: #c92a2a;
        }

        .node text {
            font-size: 11px;
            fill: #333;
            pointer-events: none;
            text-anchor: middle;
            font-weight: 500;
        }

        .link {
            stroke: #999;
            stroke-opacity: 0.6;
            stroke-width: 1.5px;
        }

        .link.active {
            stroke: #667eea;
            stroke-opacity: 1;
            stroke-width: 3px;
        }

        @media (max-width: 1200px) {
            .container {
                flex-direction: column;
            }

            .sidebar-left, .sidebar-right, .main-content {
                width: 100%;
            }

            .sidebar {
                border: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <aside class="sidebar sidebar-left">
            <div class="profile">
                <h2>Über mich</h2>
                <div class="profile-info">
                    <p><strong>Name:</strong> Patryk Gadziomski</p>
                    <p><strong>Studium:</strong> Bibliotheksinformatik</p>
                    <p><strong>Semester:</strong> 1</p>
                    <p><strong>Hochschule:</strong> TH Wildau</p>
                </div>
            </div>

            <div class="directory">
                <h2>Artikelverzeichnis</h2>
                <ul class="article-list">
                    <li><a href="#" data-article="intro" class="active">Einführung</a></li>
                    <li><a href="#" data-article="bibliotheksinformatik">Bibliotheksinformatik</a></li>
                    <li><a href="#" data-article="patrykgadziomski">Patryk Gadziomski</a></li>
                    <li><a href="#" data-article="day1">Tag 1 - 15.10.2025</a></li>
                    <li><a href="#" data-article="day2">Tag 2 - 17.10.2025</a></li>
                    <li><a href="#" data-article="day3">Tag 3 - 03.12.2025</a></li>
                    <li><a href="#" data-article="day4">Tag 4 - 04.12.2025</a></li>
                    <li><a href="#" data-article="day5">Tag 5 - 16.01.2025</a></li>
                </ul>
            </div>
        </aside>

        <main class="main-content">
            <article id="article-content" class="article-content">
                <h1>Willkommen zu meinem Lernportfolio</h1>
                <p>Dieses Portfolio dokumentiert meine Lernreise im Bereich Semantic Web und Linked Data. Hier sammle ich Artikel, Notizen und Erkenntnisse zu verschiedenen Themen.</p>
                <h3>Über dieses Portfolio</h3>
                <p>Das Besondere an diesem Lernportfolio ist die Integration eines Knowledge Graphs auf der rechten Seite. Der Graph visualisiert die Struktur und Beziehungen zwischen den verschiedenen Artikeln und Konzepten, ähnlich wie in Obsidian.</p>
                <p>Jeder Knoten repräsentiert einen Artikel, und die Verbindungen zeigen, wie die Themen miteinander zusammenhängen. Klicke auf einen Knoten im Graph, um direkt zum entsprechenden Artikel zu springen!</p>
            </article>
        </main>

        <aside class="sidebar sidebar-right">
            <h2>Knowledge Graph</h2>
            <div class="graph-info">
                Visualisierung aller Artikel und ihrer Beziehungen. Klicke auf einen Knoten, um zum Artikel zu springen!
            </div>
            <div id="knowledge-graph"></div>
        </aside>
    </div>

    <script>
        // Daten werden aus JSON-Datei geladen
        let articles = {};
        let graphData = {};
        let currentArticle = 'intro';

        // Daten aus JSON-Datei laden
        async function loadData() {
            try {
                const response = await fetch('data.json');
                const data = await response.json();
                articles = data.articles;
                graphData = data.graphData;
                
                // Nach dem Laden der Daten initialisieren
                initializeApp();
            } catch (error) {
                console.error('Fehler beim Laden der Daten:', error);
                // Fallback: Zeige Fehlermeldung
                document.getElementById('article-content').innerHTML = `
                    <h1>Fehler beim Laden</h1>
                    <p>Die Datei data.json konnte nicht geladen werden. Bitte stelle sicher, dass sie im gleichen Verzeichnis liegt.</p>
                `;
            }
        }

        // App initialisieren nach dem Laden der Daten
        function initializeApp() {
            setupNavigation();
            createKnowledgeGraph();
            loadArticle('intro');
        }

        // Navigation einrichten
        function setupNavigation() {
            document.querySelectorAll('.article-list a').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    loadArticle(e.target.dataset.article);
                });
            });
        }

        // Navigation zwischen Artikeln
        function loadArticle(articleId) {
            currentArticle = articleId;
            const article = articles[articleId];
            
            // Aktiven Link markieren
            document.querySelectorAll('.article-list a').forEach(a => a.classList.remove('active'));
            document.querySelector(`[data-article="${articleId}"]`).classList.add('active');
            
            // Artikel laden
            document.getElementById('article-content').innerHTML = `
                <h1>${article.title}</h1>
                ${article.content}
            `;

            // Graph aktualisieren
            updateGraphHighlight(articleId);
        }

        // Knowledge Graph Visualisierung
        function createKnowledgeGraph() {
            const container = document.getElementById('knowledge-graph');
            const width = container.offsetWidth;
            const height = 600;

            const svg = d3.select('#knowledge-graph')
                .append('svg')
                .attr('width', width)
                .attr('height', height);

            const simulation = d3.forceSimulation(graphData.nodes)
                .force('link', d3.forceLink(graphData.links).id(d => d.id).distance(80))
                .force('charge', d3.forceManyBody().strength(-400))
                .force('center', d3.forceCenter(width / 2, height / 2))
                .force('collision', d3.forceCollide().radius(35));

            const link = svg.append('g')
                .selectAll('line')
                .data(graphData.links)
                .enter().append('line')
                .attr('class', 'link');

            const node = svg.append('g')
                .selectAll('g')
                .data(graphData.nodes)
                .enter().append('g')
                .attr('class', d => d.id === currentArticle ? 'node active' : 'node')
                .call(d3.drag()
                    .on('start', dragstarted)
                    .on('drag', dragged)
                    .on('end', dragended))
                .on('click', (event, d) => {
                    loadArticle(d.id);
                });

            node.append('circle')
                .attr('r', 25);

            node.append('text')
                .attr('dy', 40)
                .text(d => d.label)
                .style('font-size', '11px')
                .each(function(d) {
                    const text = d3.select(this);
                    const words = d.label.split(' ');
                    if (words.length > 1) {
                        text.text('');
                        words.forEach((word, i) => {
                            text.append('tspan')
                                .attr('x', 0)
                                .attr('dy', i === 0 ? 0 : 12)
                                .text(word);
                        });
                    }
                });

            simulation.on('tick', () => {
                link
                    .attr('x1', d => d.source.x)
                    .attr('y1', d => d.source.y)
                    .attr('x2', d => d.target.x)
                    .attr('y2', d => d.target.y);

                node.attr('transform', d => `translate(${d.x},${d.y})`);
            });

            function dragstarted(event, d) {
                if (!event.active) simulation.alphaTarget(0.3).restart();
                d.fx = d.x;
                d.fy = d.y;
            }

            function dragged(event, d) {
                d.fx = event.x;
                d.fy = event.y;
            }

            function dragended(event, d) {
                if (!event.active) simulation.alphaTarget(0);
                d.fx = null;
                d.fy = null;
            }

            // Funktion zum Aktualisieren der Hervorhebung
            window.updateGraphHighlight = function(articleId) {
                svg.selectAll('.node')
                    .classed('active', d => d.id === articleId);

                const connectedNodeIds = new Set();
                connectedNodeIds.add(articleId);
                
                graphData.links.forEach(link => {
                    if (link.source.id === articleId) connectedNodeIds.add(link.target.id);
                    if (link.target.id === articleId) connectedNodeIds.add(link.source.id);
                });

                svg.selectAll('.link')
                    .classed('active', d => 
                        (d.source.id === articleId || d.target.id === articleId)
                    );
            };
        }

        // Daten beim Laden der Seite laden
        loadData();
    </script>
</body>
</html>